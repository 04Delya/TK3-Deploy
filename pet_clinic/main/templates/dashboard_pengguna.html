{% extends "base.html" %}
{% block title %}Dashboard Pengguna{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray3 flex justify-center items-start pt-20 px-4">

  <!-- profile card ---------------------------------------------------- -->
  <div class="w-full max-w-3xl bg-gray2/60 backdrop-blur-md rounded-[50px] shadow-xl
              border-[6px] border-blue2 p-10 relative">

    <h2 class="text-2xl font-bold text-center mb-8">
      Profile
      {% if user_type == "client_individu" %}
          Klien
      {% elif user_type == "client_perusahaan" %}
          Klien (Perusahaan)
      {% elif user_type == "fdo" %}
          Front-Desk Officer
      {% elif user_type == "dokter" %}
          Dokter Hewan
      {% elif user_type == "perawat" %}
          Perawat Hewan
      {% endif %}
    </h2>

    <!-- two-column info grid -->
    <div class="grid grid-cols-2 gap-x-10 gap-y-4 text-lg pb-8">

      <!-- labels ------------------------------------------------------- -->
      <div class="font-semibold space-y-2">
        <p>Nomor Identitas</p>
        <p>Email</p>

        {% if user_type == "client_individu" %}
            <p>Nama</p>
        {% elif user_type == "client_perusahaan" %}
            <p>Nama Perusahaan</p>
        {% else %}
            <p>Tanggal Diterima</p>
            <p>Tanggal Akhir Kerja</p>
        {% endif %}

        <p>Alamat</p>
        <p>Nomor Telepon</p>
      </div>

      <!-- values ------------------------------------------------------- -->
      <div class="space-y-2">
        <p>{{ identity }}</p>
        <p>{{ email }}</p>

        {% if user_type == "client_individu" or user_type == "client_perusahaan" %}
            <p>{{ name }}</p>
        {% else %}
            <p>{{ tgl_daftar }}</p>
            <p>{{ tgl_akhir }}</p>
        {% endif %}

        <p>{{ alamat }}</p>
        <p>{{ telepon }}</p>
      </div>
    </div>

    <!-- dokter/perawat extra tables ----------------------------------- -->
    {% if user_type == "dokter" %}
        <!-- Sertifikat -->
        <h3 class="text-xl font-semibold mb-2">Daftar Sertifikat</h3>
        <table class="w-full text-center mb-6 border border-gray-400">
          <thead class="bg-gray-50">
            <tr><th>No</th><th>Kode Sertifikat</th><th>Nama Sertifikat</th></tr>
          </thead>
          <tbody>
            {% for s in sertifikat %}
              <tr class="bg-white">
                <td class="border px-2">{{ s.no }}</td>
                <td class="border px-2">{{ s.kode }}</td>
                <td class="border px-2">{{ s.nama }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>

        <!-- Jadwal -->
        <h3 class="text-xl font-semibold mb-2">Daftar Jadwal Praktik</h3>
        <table class="w-full text-center mb-6 border border-gray-400">
          <thead class="bg-gray-50">
            <tr><th>No</th><th>Hari</th><th>Mulai</th><th>Selesai</th></tr>
          </thead>
          <tbody>
            {% for j in jadwal %}
              <tr class="bg-white">
                <td class="border px-2">{{ j.no }}</td>
                <td class="border px-2">{{ j.hari }}</td>
                <td class="border px-2">{{ j.mulai }}</td>
                <td class="border px-2">{{ j.selesai }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
    {% endif %}

    <!-- action buttons ------------------------------------------------- -->
    <div class="flex justify-center gap-6">
      <button onclick="document.getElementById('modal-profile').classList.remove('hidden')"
              class="px-6 py-2 bg-blue4 text-black rounded-xl">Update Profile</button>
      <button onclick="document.getElementById('modal-pass').classList.remove('hidden')"
              class="px-6 py-2 bg-blue1 text-white rounded-xl">Update Password</button>
    </div>
  </div>
</div>

<div id="modal-pass"
     class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
  <div class="bg-gray2 p-8 rounded-3xl w-full max-w-md relative">
    <button class="absolute top-3 right-4 text-xl"
            onclick="this.closest('#modal-pass').classList.add('hidden')">&times;</button>

    <h2 class="text-2xl font-bold mb-6">Update Password</h2>
    <form method="post" action="#">
      {% csrf_token %}
      <div class="space-y-4">
        <input name="old_pw"  type="password" class="input" placeholder="Password Lama*">
        <input name="new_pw1" type="password" class="input" placeholder="Password Baru*">
        <input name="new_pw2" type="password" class="input" placeholder="Konfirmasi Password Baru*">
      </div>

      <div class="flex justify-end gap-4 mt-6">
        <button type="button"
                onclick="document.getElementById('modal-pass').classList.add('hidden')"
                class="px-6 py-2 bg-blue4 text-black rounded-xl">Cancel</button>
        <button type="submit"
                class="px-6 py-2 bg-blue1 text-white rounded-xl">Update Password</button>
      </div>
    </form>
  </div>
</div>

<style>
  .input{ @apply w-full bg-white p-3 rounded-lg text-black text-lg focus:outline-none; }
</style>
{% endblock %}